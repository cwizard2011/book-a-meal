{"version":3,"sources":["../../server/controllers/MealController.js"],"names":["MealController","createMeal","req","res","checkBody","notEmpty","trim","requestErrors","validationErrors","status","json","errors","meal","mealId","body","mealName","price","description","mealAvatar","filterMeal","meals","filter","check","length","push","send","message","error","sendStatus","getMeal","getMealId","parseInt","params","result","m","editMeal","existingMeal","edit","setHeader","removeMeal","currentMeal","splice"],"mappings":"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","file":"MealController.js","sourcesContent":["\n/** @class MealController\n *\n */\nclass MealController {\n  /**\n   * Create a new meal\n   *\n   * @static\n   * @param {Object} req - request object\n   * @param {Object} res - response object\n   * @returns {Object} res\n   *\n   */\n  static createMeal(req, res) {\n    try {\n      req.checkBody('mealId', 'id is required').notEmpty().trim();\n      req.checkBody('mealName', 'Meal name is required').notEmpty().trim();\n      req.checkBody('price', 'Price of meal is required').notEmpty().trim();\n      req.checkBody('description', 'Meal description is required').notEmpty().trim();\n      req.checkBody('mealAvatar', 'Image of meal is required').notEmpty().trim();\n\n      const requestErrors = req.validationErrors();\n\n      if (requestErrors) {\n        res.status(400).json({\n          errors: requestErrors,\n        });\n      } else {\n        const meal = {\n          mealId: req.body.mealId,\n          mealName: req.body.mealName,\n          price: req.body.price,\n          description: req.body.description,\n          mealAvatar: req.body.mealAvatar,\n        };\n        const filterMeal = req.meals.filter(check =>\n          check.mealName === req.body.mealName || check.mealId === req.body.mealId);\n        if (filterMeal.length === 0) {\n          req.meals.push(meal);\n          res.status(201).json({ meal });\n        } else {\n          return res.status(400).send({ message: 'Meal or this Meal Id already exist' });\n        }\n      }\n    } catch (error) {\n      res.sendStatus(500);\n    }\n  }\n\n  /**\n   * get meal\n   *\n   * @static\n   * @param {Object} req - request object\n   * @param {Object} res - response object\n   * @returns {Object} res\n   *\n   */\n  static getMeal(req, res) {\n    res.status(200).json({\n      meals: req.meals,\n    });\n  }\n  /**\n   * get meal by id\n   *\n   * @static\n   * @param {Object} req - request object\n   * @param {Object} res - response object\n   * @returns {Object} res\n   *\n   */\n  static getMealId(req, res) {\n    const mealId = parseInt(req.params.mealId, 10);\n    const result = req.meals.filter(m => m.mealId === mealId)[0];\n\n    if (!result) {\n      res.sendStatus(404);\n    } else {\n      res.send(result);\n    }\n  }\n  /**\n   *Edit meals by Id\n   *\n   * @static\n   * @param {Object} req - request object\n   * @param {Object} res - response object\n   * @returns {Object} res\n  */\n  static editMeal(req, res) {\n    const mealId = parseInt(req.params.mealId, 10);\n    const existingMeal = req.meals.filter(edit => edit.mealId === mealId)[0];\n\n    if (!existingMeal) {\n      const meal = req.body;\n      meal.mealId = mealId;\n      req.meals.push(meal);\n      res.setHeader(`Location, /api/v1/ ${mealId}`);\n      res.sendStatus(201);\n    } else {\n      existingMeal.mealName = req.body.mealName;\n      existingMeal.price = req.body.price;\n      existingMeal.description = req.body.description;\n      res.sendStatus(204);\n    }\n  }\n  /**\n   *Edit meals by Id\n   *\n   * @static\n   * @param {Object} req - request object\n   * @param {Object} res - response object\n   * @returns {Object} res\n  */\n  static removeMeal(req, res) {\n    const mealId = parseInt(req.params.mealId, 10);\n    const currentMeal = req.meals.filter(check => check.mealId === mealId)[0];\n\n    if (!currentMeal) {\n      return res.sendStatus(404);\n    }\n    req.meals = req.meals.splice(currentMeal, 1);\n    res.sendStatus(204);\n  }\n}\n\nexport default MealController;\n"]}